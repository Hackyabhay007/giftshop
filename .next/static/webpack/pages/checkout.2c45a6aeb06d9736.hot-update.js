"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/checkout",{

/***/ "./src/hooks/use-checkout-submit.js":
/*!******************************************!*\
  !*** ./src/hooks/use-checkout-submit.js ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n/* harmony import */ var react_hook_form__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-hook-form */ \"./node_modules/react-hook-form/dist/index.esm.mjs\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _redux_features_order_orderApi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/redux/features/order/orderApi */ \"./src/redux/features/order/orderApi.js\");\n/* harmony import */ var _redux_features_order_orderSlice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/redux/features/order/orderSlice */ \"./src/redux/features/order/orderSlice.js\");\n/* harmony import */ var _redux_features_coupon_couponApi__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/redux/features/coupon/couponApi */ \"./src/redux/features/coupon/couponApi.js\");\n/* harmony import */ var _use_cart_info__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./use-cart-info */ \"./src/hooks/use-cart-info.js\");\n/* harmony import */ var _utils_toast__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/utils/toast */ \"./src/utils/toast.js\");\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\nconst useCheckoutSubmit = ()=>{\n    _s();\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const dispatch = (0,react_redux__WEBPACK_IMPORTED_MODULE_1__.useDispatch)();\n    const couponRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const [showSuccessModal, setShowSuccessModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [orderIdForModal, setOrderIdForModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const { accessToken, user } = (0,react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector)((state)=>state.auth);\n    const { cart_products } = (0,react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector)((state)=>state.cart);\n    const { shipping_info } = (0,react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector)((state)=>state.order);\n    const { total } = (0,_use_cart_info__WEBPACK_IMPORTED_MODULE_6__[\"default\"])();\n    const [createRazorpayOrder] = (0,_redux_features_order_orderApi__WEBPACK_IMPORTED_MODULE_3__.useCreateRazorpayOrderMutation)();\n    const [saveOrder] = (0,_redux_features_order_orderApi__WEBPACK_IMPORTED_MODULE_3__.useSaveOrderMutation)();\n    const [matchCoupon] = (0,_redux_features_coupon_couponApi__WEBPACK_IMPORTED_MODULE_5__.useMatchCouponMutation)();\n    const [couponInfo, setCouponInfo] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n    const [cartTotal, setCartTotal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(total);\n    const [discountAmount, setDiscountAmount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [couponApplyMsg, setCouponApplyMsg] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [isSubmitting, setIsSubmitting] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const { register, handleSubmit, formState: { errors }, setValue, setError, watch, reset } = (0,react_hook_form__WEBPACK_IMPORTED_MODULE_8__.useForm)();\n    const handleCouponCode = async (event)=>{\n        event.preventDefault();\n        if (!couponRef.current || !couponRef.current.value) {\n            setCouponApplyMsg(\"Please enter a coupon code.\");\n            return;\n        }\n        const couponCode = couponRef.current.value;\n        setCouponInfo(couponCode);\n        try {\n            const response = await matchCoupon({\n                couponCode\n            }).unwrap();\n            if (response.valid) {\n                if (total >= response.min_price) {\n                    setCouponApplyMsg(\"Coupon applied successfully! Discount: ₹\".concat(response.discount));\n                    setDiscountAmount(parseFloat(response.discount));\n                } else {\n                    setCouponApplyMsg(\"Coupon is valid but requires a minimum total of ₹\".concat(response.min_price, \".\"));\n                }\n            } else {\n                setCouponApplyMsg(\"Coupon is not valid.\");\n            }\n        } catch (error) {\n            setCouponApplyMsg(\"Failed to apply coupon: \".concat(error.message));\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const discountTotal = discountAmount || 0;\n        const totalValue = Math.max(Number(total) - discountTotal, 0);\n        setCartTotal(totalValue);\n    }, [\n        total,\n        discountAmount\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (shipping_info) {\n            setValue(\"firstName\", shipping_info.firstName);\n            setValue(\"lastName\", shipping_info.lastName);\n            setValue(\"country\", shipping_info.country);\n            setValue(\"address\", shipping_info.address);\n            setValue(\"city\", shipping_info.city);\n            setValue(\"state\", shipping_info.state);\n            setValue(\"zipCode\", shipping_info.zipCode);\n            setValue(\"contactNo\", shipping_info.contactNo);\n            setValue(\"email\", shipping_info.email);\n        }\n    }, [\n        shipping_info,\n        setValue\n    ]);\n    const submitHandler = async (data)=>{\n        if (isSubmitting) return;\n        setIsSubmitting(true);\n        dispatch((0,_redux_features_order_orderSlice__WEBPACK_IMPORTED_MODULE_4__.set_shipping)(data));\n        const products = cart_products.map((product)=>({\n                product_id: product.product_id,\n                quantity: product.orderQuantity,\n                price: product.price\n            })).filter((product)=>product.product_id && product.quantity && product.price);\n        if (products.length === 0) {\n            (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"No valid products in cart.\");\n            setIsSubmitting(false);\n            return;\n        }\n        // Calculate the final total after applying the discount\n        const discountTotal = discountAmount || 0;\n        const finalPrice = Math.max(Number(total) - discountTotal, 0);\n        const orderInfo = {\n            products,\n            email: data.email,\n            address: data.address,\n            state: data.state,\n            city: data.city,\n            pincode: data.zipCode,\n            country: \"India\",\n            phone_number: data.contactNo,\n            price: cartTotal,\n            payment_type: data.payment,\n            coupon_used: couponInfo || null,\n            first_name: data.firstName,\n            last_name: data.lastName,\n            accessToken\n        };\n        try {\n            if (data.payment === \"online\") {\n                await handlePaymentWithRazorpay(orderInfo);\n            } else if (data.payment === \"cod\") {\n                const res = await saveOrder(orderInfo).unwrap();\n                if (res === null || res === void 0 ? void 0 : res.order_id) {\n                    localStorage.removeItem(\"cart_products\");\n                    setOrderIdForModal(res.order_id);\n                    reset();\n                    setShowSuccessModal(true);\n                } else {\n                    (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"Error saving order. Please try again.\");\n                }\n            }\n        } catch (error) {\n            console.error(\"Error during order submission:\", error);\n            (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"There was an error placing your order. Please try again.\");\n        } finally{\n            setIsSubmitting(false);\n        }\n    };\n    const handlePaymentWithRazorpay = async (orderInfo)=>{\n        try {\n            console.log(\"Initiating Razorpay order with info:\", orderInfo);\n            const orderResponse = await createRazorpayOrder(orderInfo).unwrap();\n            console.log(\"Received order response:\", orderResponse);\n            if (!orderResponse || orderResponse.status !== \"success\") {\n                console.error(\"Invalid order response:\", orderResponse);\n                throw new Error(\"Failed to initiate payment: Invalid server response\");\n            }\n            const options = {\n                key: \"rzp_live_2sTBLvpxef5qxP\",\n                amount: orderResponse.amount,\n                currency: \"INR\",\n                name: \"MySweetWishes\",\n                description: \"Order Payment\",\n                order_id: orderResponse.razorpay_order_id,\n                handler: async (response)=>{\n                    await verifyAndSaveOrder(response, orderInfo);\n                },\n                prefill: {\n                    name: \"\".concat(orderInfo.first_name, \" \").concat(orderInfo.last_name),\n                    email: orderInfo.email,\n                    contact: orderInfo.phone_number\n                },\n                notes: {\n                    address: orderInfo.address\n                },\n                theme: {\n                    color: \"#F37254\"\n                }\n            };\n            const razorpay = new window.Razorpay(options);\n            razorpay.open();\n        } catch (error) {\n            console.error(\"Error in handlePaymentWithRazorpay:\", error);\n            (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"Failed to initiate payment: \".concat(error.message));\n            throw error;\n        }\n    };\n    const verifyAndSaveOrder = async (response, orderInfo)=>{\n        try {\n            const verifyResponse = await fetch(\"https://apiv2.mysweetwishes.com/api/verifypayment\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: \"Bearer \".concat(orderInfo.accessToken)\n                },\n                body: JSON.stringify({\n                    razorpay_order_id: response.razorpay_order_id,\n                    razorpay_payment_id: response.razorpay_payment_id,\n                    razorpay_signature: response.razorpay_signature\n                })\n            });\n            const verifyData = await verifyResponse.json();\n            if (verifyData.status === \"success\") {\n                (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifySuccess)(\"Your payment has been verified successfully!\");\n                localStorage.removeItem(\"cart_products\");\n                router.push(\"/order/\".concat(verifyData.order_id));\n            } else {\n                (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"Payment verification failed. Please contact support.\");\n            }\n        } catch (error) {\n            console.error(\"Payment verification error:\", error);\n            (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"Payment verification request failed. Please contact support.\");\n        }\n    };\n    return {\n        register,\n        handleCouponCode,\n        handleSubmit,\n        submitHandler,\n        formState: {\n            errors\n        },\n        couponApplyMsg,\n        cartTotal,\n        discountAmount,\n        couponRef,\n        setError,\n        isSubmitting,\n        watch,\n        setValue,\n        reset,\n        showSuccessModal,\n        setShowSuccessModal,\n        orderIdForModal\n    };\n};\n_s(useCheckoutSubmit, \"9ePoGOkfs6ifMb9WjpSWxBjE09s=\", false, function() {\n    return [\n        next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter,\n        react_redux__WEBPACK_IMPORTED_MODULE_1__.useDispatch,\n        react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector,\n        _use_cart_info__WEBPACK_IMPORTED_MODULE_6__[\"default\"],\n        _redux_features_order_orderApi__WEBPACK_IMPORTED_MODULE_3__.useCreateRazorpayOrderMutation,\n        _redux_features_order_orderApi__WEBPACK_IMPORTED_MODULE_3__.useSaveOrderMutation,\n        _redux_features_coupon_couponApi__WEBPACK_IMPORTED_MODULE_5__.useMatchCouponMutation,\n        react_hook_form__WEBPACK_IMPORTED_MODULE_8__.useForm\n    ];\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (useCheckoutSubmit);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaG9va3MvdXNlLWNoZWNrb3V0LXN1Ym1pdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQW9EO0FBQ0c7QUFDYjtBQUNGO0FBSUM7QUFDd0I7QUFDVTtBQUNqQztBQUNpQjtBQUUzRCxNQUFNYyxvQkFBb0I7O0lBQ3hCLE1BQU1DLFNBQVNULHNEQUFTQTtJQUN4QixNQUFNVSxXQUFXYix3REFBV0E7SUFDNUIsTUFBTWMsWUFBWWhCLDZDQUFNQSxDQUFDO0lBRXpCLE1BQU0sQ0FBQ2lCLGtCQUFrQkMsb0JBQW9CLEdBQUduQiwrQ0FBUUEsQ0FBQztJQUN6RCxNQUFNLENBQUNvQixpQkFBaUJDLG1CQUFtQixHQUFHckIsK0NBQVFBLENBQUM7SUFFdkQsTUFBTSxFQUFFc0IsV0FBVyxFQUFFQyxJQUFJLEVBQUUsR0FBR25CLHdEQUFXQSxDQUFDLENBQUNvQixRQUFVQSxNQUFNQyxJQUFJO0lBQy9ELE1BQU0sRUFBRUMsYUFBYSxFQUFFLEdBQUd0Qix3REFBV0EsQ0FBQyxDQUFDb0IsUUFBVUEsTUFBTUcsSUFBSTtJQUMzRCxNQUFNLEVBQUVDLGFBQWEsRUFBRSxHQUFHeEIsd0RBQVdBLENBQUMsQ0FBQ29CLFFBQVVBLE1BQU1LLEtBQUs7SUFDNUQsTUFBTSxFQUFFQyxLQUFLLEVBQUUsR0FBR25CLDBEQUFXQTtJQUU3QixNQUFNLENBQUNvQixvQkFBb0IsR0FBR3hCLDhGQUE4QkE7SUFDNUQsTUFBTSxDQUFDeUIsVUFBVSxHQUFHeEIsb0ZBQW9CQTtJQUN4QyxNQUFNLENBQUN5QixZQUFZLEdBQUd2Qix3RkFBc0JBO0lBRTVDLE1BQU0sQ0FBQ3dCLFlBQVlDLGNBQWMsR0FBR25DLCtDQUFRQTtJQUM1QyxNQUFNLENBQUNvQyxXQUFXQyxhQUFhLEdBQUdyQywrQ0FBUUEsQ0FBQzhCO0lBQzNDLE1BQU0sQ0FBQ1EsZ0JBQWdCQyxrQkFBa0IsR0FBR3ZDLCtDQUFRQSxDQUFDO0lBQ3JELE1BQU0sQ0FBQ3dDLGdCQUFnQkMsa0JBQWtCLEdBQUd6QywrQ0FBUUEsQ0FBQztJQUNyRCxNQUFNLENBQUMwQyxjQUFjQyxnQkFBZ0IsR0FBRzNDLCtDQUFRQSxDQUFDO0lBRWpELE1BQU0sRUFDSjRDLFFBQVEsRUFDUkMsWUFBWSxFQUNaQyxXQUFXLEVBQUVDLE1BQU0sRUFBRSxFQUNyQkMsUUFBUSxFQUNSQyxRQUFRLEVBQ1JDLEtBQUssRUFDTEMsS0FBSyxFQUNOLEdBQUc5Qyx3REFBT0E7SUFHWCxNQUFNK0MsbUJBQW1CLE9BQU9DO1FBQzlCQSxNQUFNQyxjQUFjO1FBRXBCLElBQUksQ0FBQ3JDLFVBQVVzQyxPQUFPLElBQUksQ0FBQ3RDLFVBQVVzQyxPQUFPLENBQUNDLEtBQUssRUFBRTtZQUNsRGYsa0JBQWtCO1lBQ2xCO1FBQ0Y7UUFFQSxNQUFNZ0IsYUFBYXhDLFVBQVVzQyxPQUFPLENBQUNDLEtBQUs7UUFDMUNyQixjQUFjc0I7UUFDZCxJQUFJO1lBQ0YsTUFBTUMsV0FBVyxNQUFNekIsWUFBWTtnQkFBRXdCO1lBQVcsR0FBR0UsTUFBTTtZQUV6RCxJQUFJRCxTQUFTRSxLQUFLLEVBQUU7Z0JBQ2xCLElBQUk5QixTQUFTNEIsU0FBU0csU0FBUyxFQUFFO29CQUMvQnBCLGtCQUNFLDJDQUE2RCxPQUFsQmlCLFNBQVNJLFFBQVE7b0JBRTlEdkIsa0JBQWtCd0IsV0FBV0wsU0FBU0ksUUFBUTtnQkFDaEQsT0FBTztvQkFDTHJCLGtCQUNFLG9EQUF1RSxPQUFuQmlCLFNBQVNHLFNBQVMsRUFBQztnQkFFM0U7WUFDRixPQUFPO2dCQUNMcEIsa0JBQWtCO1lBQ3BCO1FBQ0YsRUFBRSxPQUFPdUIsT0FBTztZQUNkdkIsa0JBQWtCLDJCQUF5QyxPQUFkdUIsTUFBTUMsT0FBTztRQUM1RDtJQUNGO0lBRUEvRCxnREFBU0EsQ0FBQztRQUNSLE1BQU1nRSxnQkFBZ0I1QixrQkFBa0I7UUFDeEMsTUFBTTZCLGFBQWFDLEtBQUtDLEdBQUcsQ0FBQ0MsT0FBT3hDLFNBQVNvQyxlQUFlO1FBQzNEN0IsYUFBYThCO0lBQ2YsR0FBRztRQUFDckM7UUFBT1E7S0FBZTtJQUUxQnBDLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSTBCLGVBQWU7WUFDakJvQixTQUFTLGFBQWFwQixjQUFjMkMsU0FBUztZQUM3Q3ZCLFNBQVMsWUFBWXBCLGNBQWM0QyxRQUFRO1lBQzNDeEIsU0FBUyxXQUFXcEIsY0FBYzZDLE9BQU87WUFDekN6QixTQUFTLFdBQVdwQixjQUFjOEMsT0FBTztZQUN6QzFCLFNBQVMsUUFBUXBCLGNBQWMrQyxJQUFJO1lBQ25DM0IsU0FBUyxTQUFTcEIsY0FBY0osS0FBSztZQUNyQ3dCLFNBQVMsV0FBV3BCLGNBQWNnRCxPQUFPO1lBQ3pDNUIsU0FBUyxhQUFhcEIsY0FBY2lELFNBQVM7WUFDN0M3QixTQUFTLFNBQVNwQixjQUFja0QsS0FBSztRQUN2QztJQUNGLEdBQUc7UUFBQ2xEO1FBQWVvQjtLQUFTO0lBRTVCLE1BQU0rQixnQkFBZ0IsT0FBT0M7UUFDM0IsSUFBSXRDLGNBQWM7UUFDbEJDLGdCQUFnQjtRQUVoQjNCLFNBQVNQLDhFQUFZQSxDQUFDdUU7UUFFdEIsTUFBTUMsV0FBV3ZELGNBQ2R3RCxHQUFHLENBQUMsQ0FBQ0MsVUFBYTtnQkFDakJDLFlBQVlELFFBQVFDLFVBQVU7Z0JBQzlCQyxVQUFVRixRQUFRRyxhQUFhO2dCQUMvQkMsT0FBT0osUUFBUUksS0FBSztZQUN0QixJQUNDQyxNQUFNLENBQ0wsQ0FBQ0wsVUFBWUEsUUFBUUMsVUFBVSxJQUFJRCxRQUFRRSxRQUFRLElBQUlGLFFBQVFJLEtBQUs7UUFHeEUsSUFBSU4sU0FBU1EsTUFBTSxLQUFLLEdBQUc7WUFDekI3RSx5REFBV0EsQ0FBQztZQUNaK0IsZ0JBQWdCO1lBQ2hCO1FBQ0Y7UUFFQyx3REFBd0Q7UUFDM0QsTUFBTXVCLGdCQUFnQjVCLGtCQUFrQjtRQUN4QyxNQUFNb0QsYUFBYXRCLEtBQUtDLEdBQUcsQ0FBQ0MsT0FBT3hDLFNBQVNvQyxlQUFlO1FBRXpELE1BQU15QixZQUFZO1lBQ2hCVjtZQUNBSCxPQUFPRSxLQUFLRixLQUFLO1lBQ2pCSixTQUFTTSxLQUFLTixPQUFPO1lBQ3JCbEQsT0FBT3dELEtBQUt4RCxLQUFLO1lBQ2pCbUQsTUFBTUssS0FBS0wsSUFBSTtZQUNmaUIsU0FBU1osS0FBS0osT0FBTztZQUNyQkgsU0FBUztZQUNUb0IsY0FBY2IsS0FBS0gsU0FBUztZQUM1QlUsT0FBT25EO1lBQ1AwRCxjQUFjZCxLQUFLZSxPQUFPO1lBQzFCQyxhQUFhOUQsY0FBYztZQUMzQitELFlBQVlqQixLQUFLVCxTQUFTO1lBQzFCMkIsV0FBV2xCLEtBQUtSLFFBQVE7WUFDeEJsRDtRQUNGO1FBRUEsSUFBSTtZQUNGLElBQUkwRCxLQUFLZSxPQUFPLEtBQUssVUFBVTtnQkFDN0IsTUFBTUksMEJBQTBCUjtZQUNsQyxPQUFPLElBQUlYLEtBQUtlLE9BQU8sS0FBSyxPQUFPO2dCQUNqQyxNQUFNSyxNQUFNLE1BQU1wRSxVQUFVMkQsV0FBV2hDLE1BQU07Z0JBQzdDLElBQUl5QyxnQkFBQUEsMEJBQUFBLElBQUtDLFFBQVEsRUFBRTtvQkFDakJDLGFBQWFDLFVBQVUsQ0FBQztvQkFDeEJsRixtQkFBbUIrRSxJQUFJQyxRQUFRO29CQUMvQmxEO29CQUNBaEMsb0JBQW9CO2dCQUN0QixPQUFPO29CQUNMUCx5REFBV0EsQ0FBQztnQkFDZDtZQUNGO1FBQ0YsRUFBRSxPQUFPb0QsT0FBTztZQUNkd0MsUUFBUXhDLEtBQUssQ0FBQyxrQ0FBa0NBO1lBQ2hEcEQseURBQVdBLENBQUM7UUFDZCxTQUFVO1lBQ1IrQixnQkFBZ0I7UUFDbEI7SUFDRjtJQUVBLE1BQU13RCw0QkFBNEIsT0FBT1I7UUFDdkMsSUFBSTtZQUNGYSxRQUFRQyxHQUFHLENBQUMsd0NBQXdDZDtZQUNwRCxNQUFNZSxnQkFBZ0IsTUFBTTNFLG9CQUFvQjRELFdBQVdoQyxNQUFNO1lBQ2pFNkMsUUFBUUMsR0FBRyxDQUFDLDRCQUE0QkM7WUFFeEMsSUFBSSxDQUFDQSxpQkFBaUJBLGNBQWNDLE1BQU0sS0FBSyxXQUFXO2dCQUN4REgsUUFBUXhDLEtBQUssQ0FBQywyQkFBMkIwQztnQkFDekMsTUFBTSxJQUFJRSxNQUFNO1lBQ2xCO1lBRUEsTUFBTUMsVUFBVTtnQkFDZEMsS0FBSztnQkFDTEMsUUFBUUwsY0FBY0ssTUFBTTtnQkFDNUJDLFVBQVU7Z0JBQ1ZDLE1BQU07Z0JBQ05DLGFBQWE7Z0JBQ2JiLFVBQVVLLGNBQWNTLGlCQUFpQjtnQkFDekNDLFNBQVMsT0FBTzFEO29CQUNkLE1BQU0yRCxtQkFBbUIzRCxVQUFVaUM7Z0JBQ3JDO2dCQUNBMkIsU0FBUztvQkFDUEwsTUFBTSxHQUEyQnRCLE9BQXhCQSxVQUFVTSxVQUFVLEVBQUMsS0FBdUIsT0FBcEJOLFVBQVVPLFNBQVM7b0JBQ3BEcEIsT0FBT2EsVUFBVWIsS0FBSztvQkFDdEJ5QyxTQUFTNUIsVUFBVUUsWUFBWTtnQkFDakM7Z0JBQ0EyQixPQUFPO29CQUNMOUMsU0FBU2lCLFVBQVVqQixPQUFPO2dCQUM1QjtnQkFDQStDLE9BQU87b0JBQ0xDLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBLE1BQU1DLFdBQVcsSUFBSUMsT0FBT0MsUUFBUSxDQUFDaEI7WUFDckNjLFNBQVNHLElBQUk7UUFDZixFQUFFLE9BQU85RCxPQUFPO1lBQ2R3QyxRQUFReEMsS0FBSyxDQUFDLHVDQUF1Q0E7WUFDckRwRCx5REFBV0EsQ0FBQywrQkFBNkMsT0FBZG9ELE1BQU1DLE9BQU87WUFDeEQsTUFBTUQ7UUFDUjtJQUNGO0lBRUEsTUFBTXFELHFCQUFxQixPQUFPM0QsVUFBVWlDO1FBQzFDLElBQUk7WUFDRixNQUFNb0MsaUJBQWlCLE1BQU1DLE1BQzNCLHFEQUNBO2dCQUNFQyxRQUFRO2dCQUNSQyxTQUFTO29CQUNQLGdCQUFnQjtvQkFDaEJDLGVBQWUsVUFBZ0MsT0FBdEJ4QyxVQUFVckUsV0FBVztnQkFDaEQ7Z0JBQ0E4RyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7b0JBQ25CbkIsbUJBQW1CekQsU0FBU3lELGlCQUFpQjtvQkFDN0NvQixxQkFBcUI3RSxTQUFTNkUsbUJBQW1CO29CQUNqREMsb0JBQW9COUUsU0FBUzhFLGtCQUFrQjtnQkFDakQ7WUFDRjtZQUdGLE1BQU1DLGFBQWEsTUFBTVYsZUFBZVcsSUFBSTtZQUU1QyxJQUFJRCxXQUFXOUIsTUFBTSxLQUFLLFdBQVc7Z0JBQ25DOUYsMkRBQWFBLENBQUM7Z0JBQ2R5RixhQUFhQyxVQUFVLENBQUM7Z0JBQ3hCeEYsT0FBTzRILElBQUksQ0FBQyxVQUE4QixPQUFwQkYsV0FBV3BDLFFBQVE7WUFDM0MsT0FBTztnQkFDTHpGLHlEQUFXQSxDQUFDO1lBQ2Q7UUFDRixFQUFFLE9BQU9vRCxPQUFPO1lBQ2R3QyxRQUFReEMsS0FBSyxDQUFDLCtCQUErQkE7WUFDN0NwRCx5REFBV0EsQ0FBQztRQUNkO0lBQ0Y7SUFFQSxPQUFPO1FBQ0xnQztRQUNBUTtRQUNBUDtRQUNBa0M7UUFDQWpDLFdBQVc7WUFBRUM7UUFBTztRQUNwQlA7UUFDQUo7UUFDQUU7UUFDQXJCO1FBQ0FnQztRQUNBUDtRQUNBUTtRQUNBRjtRQUNBRztRQUNBakM7UUFDQUM7UUFDQUM7SUFDRjtBQUNGO0dBdFBNTjs7UUFDV1Isa0RBQVNBO1FBQ1BILG9EQUFXQTtRQU1FQyxvREFBV0E7UUFDZkEsb0RBQVdBO1FBQ1hBLG9EQUFXQTtRQUNuQk8sc0RBQVdBO1FBRUNKLDBGQUE4QkE7UUFDeENDLGdGQUFvQkE7UUFDbEJFLG9GQUFzQkE7UUFnQnhDTCxvREFBT0E7OztBQXlOYiwrREFBZVMsaUJBQWlCQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9ob29rcy91c2UtY2hlY2tvdXQtc3VibWl0LmpzP2UwYjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xyXG5pbXBvcnQgeyB1c2VGb3JtIH0gZnJvbSBcInJlYWN0LWhvb2stZm9ybVwiO1xyXG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcclxuaW1wb3J0IHtcclxuICB1c2VDcmVhdGVSYXpvcnBheU9yZGVyTXV0YXRpb24sXHJcbiAgdXNlU2F2ZU9yZGVyTXV0YXRpb24sXHJcbn0gZnJvbSBcIkAvcmVkdXgvZmVhdHVyZXMvb3JkZXIvb3JkZXJBcGlcIjtcclxuaW1wb3J0IHsgc2V0X3NoaXBwaW5nIH0gZnJvbSBcIkAvcmVkdXgvZmVhdHVyZXMvb3JkZXIvb3JkZXJTbGljZVwiO1xyXG5pbXBvcnQgeyB1c2VNYXRjaENvdXBvbk11dGF0aW9uIH0gZnJvbSBcIkAvcmVkdXgvZmVhdHVyZXMvY291cG9uL2NvdXBvbkFwaVwiO1xyXG5pbXBvcnQgdXNlQ2FydEluZm8gZnJvbSBcIi4vdXNlLWNhcnQtaW5mb1wiO1xyXG5pbXBvcnQgeyBub3RpZnlFcnJvciwgbm90aWZ5U3VjY2VzcyB9IGZyb20gXCJAL3V0aWxzL3RvYXN0XCI7XHJcblxyXG5jb25zdCB1c2VDaGVja291dFN1Ym1pdCA9ICgpID0+IHtcclxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcclxuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XHJcbiAgY29uc3QgY291cG9uUmVmID0gdXNlUmVmKG51bGwpO1xyXG5cclxuICBjb25zdCBbc2hvd1N1Y2Nlc3NNb2RhbCwgc2V0U2hvd1N1Y2Nlc3NNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW29yZGVySWRGb3JNb2RhbCwgc2V0T3JkZXJJZEZvck1vZGFsXSA9IHVzZVN0YXRlKG51bGwpO1xyXG5cclxuICBjb25zdCB7IGFjY2Vzc1Rva2VuLCB1c2VyIH0gPSB1c2VTZWxlY3Rvcigoc3RhdGUpID0+IHN0YXRlLmF1dGgpO1xyXG4gIGNvbnN0IHsgY2FydF9wcm9kdWN0cyB9ID0gdXNlU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS5jYXJ0KTtcclxuICBjb25zdCB7IHNoaXBwaW5nX2luZm8gfSA9IHVzZVNlbGVjdG9yKChzdGF0ZSkgPT4gc3RhdGUub3JkZXIpO1xyXG4gIGNvbnN0IHsgdG90YWwgfSA9IHVzZUNhcnRJbmZvKCk7XHJcblxyXG4gIGNvbnN0IFtjcmVhdGVSYXpvcnBheU9yZGVyXSA9IHVzZUNyZWF0ZVJhem9ycGF5T3JkZXJNdXRhdGlvbigpO1xyXG4gIGNvbnN0IFtzYXZlT3JkZXJdID0gdXNlU2F2ZU9yZGVyTXV0YXRpb24oKTtcclxuICBjb25zdCBbbWF0Y2hDb3Vwb25dID0gdXNlTWF0Y2hDb3Vwb25NdXRhdGlvbigpO1xyXG5cclxuICBjb25zdCBbY291cG9uSW5mbywgc2V0Q291cG9uSW5mb10gPSB1c2VTdGF0ZSgpO1xyXG4gIGNvbnN0IFtjYXJ0VG90YWwsIHNldENhcnRUb3RhbF0gPSB1c2VTdGF0ZSh0b3RhbCk7XHJcbiAgY29uc3QgW2Rpc2NvdW50QW1vdW50LCBzZXREaXNjb3VudEFtb3VudF0gPSB1c2VTdGF0ZSgwKTtcclxuICBjb25zdCBbY291cG9uQXBwbHlNc2csIHNldENvdXBvbkFwcGx5TXNnXSA9IHVzZVN0YXRlKFwiXCIpO1xyXG4gIGNvbnN0IFtpc1N1Ym1pdHRpbmcsIHNldElzU3VibWl0dGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIGNvbnN0IHtcclxuICAgIHJlZ2lzdGVyLFxyXG4gICAgaGFuZGxlU3VibWl0LFxyXG4gICAgZm9ybVN0YXRlOiB7IGVycm9ycyB9LFxyXG4gICAgc2V0VmFsdWUsXHJcbiAgICBzZXRFcnJvcixcclxuICAgIHdhdGNoLFxyXG4gICAgcmVzZXRcclxuICB9ID0gdXNlRm9ybSgpO1xyXG5cclxuXHJcbiAgY29uc3QgaGFuZGxlQ291cG9uQ29kZSA9IGFzeW5jIChldmVudCkgPT4ge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAoIWNvdXBvblJlZi5jdXJyZW50IHx8ICFjb3Vwb25SZWYuY3VycmVudC52YWx1ZSkge1xyXG4gICAgICBzZXRDb3Vwb25BcHBseU1zZyhcIlBsZWFzZSBlbnRlciBhIGNvdXBvbiBjb2RlLlwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNvdXBvbkNvZGUgPSBjb3Vwb25SZWYuY3VycmVudC52YWx1ZTtcclxuICAgIHNldENvdXBvbkluZm8oY291cG9uQ29kZSk7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1hdGNoQ291cG9uKHsgY291cG9uQ29kZSB9KS51bndyYXAoKTtcclxuXHJcbiAgICAgIGlmIChyZXNwb25zZS52YWxpZCkge1xyXG4gICAgICAgIGlmICh0b3RhbCA+PSByZXNwb25zZS5taW5fcHJpY2UpIHtcclxuICAgICAgICAgIHNldENvdXBvbkFwcGx5TXNnKFxyXG4gICAgICAgICAgICBgQ291cG9uIGFwcGxpZWQgc3VjY2Vzc2Z1bGx5ISBEaXNjb3VudDog4oK5JHtyZXNwb25zZS5kaXNjb3VudH1gXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgc2V0RGlzY291bnRBbW91bnQocGFyc2VGbG9hdChyZXNwb25zZS5kaXNjb3VudCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZXRDb3Vwb25BcHBseU1zZyhcclxuICAgICAgICAgICAgYENvdXBvbiBpcyB2YWxpZCBidXQgcmVxdWlyZXMgYSBtaW5pbXVtIHRvdGFsIG9mIOKCuSR7cmVzcG9uc2UubWluX3ByaWNlfS5gXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRDb3Vwb25BcHBseU1zZyhcIkNvdXBvbiBpcyBub3QgdmFsaWQuXCIpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBzZXRDb3Vwb25BcHBseU1zZyhgRmFpbGVkIHRvIGFwcGx5IGNvdXBvbjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBkaXNjb3VudFRvdGFsID0gZGlzY291bnRBbW91bnQgfHwgMDtcclxuICAgIGNvbnN0IHRvdGFsVmFsdWUgPSBNYXRoLm1heChOdW1iZXIodG90YWwpIC0gZGlzY291bnRUb3RhbCwgMCk7XHJcbiAgICBzZXRDYXJ0VG90YWwodG90YWxWYWx1ZSk7XHJcbiAgfSwgW3RvdGFsLCBkaXNjb3VudEFtb3VudF0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHNoaXBwaW5nX2luZm8pIHtcclxuICAgICAgc2V0VmFsdWUoXCJmaXJzdE5hbWVcIiwgc2hpcHBpbmdfaW5mby5maXJzdE5hbWUpO1xyXG4gICAgICBzZXRWYWx1ZShcImxhc3ROYW1lXCIsIHNoaXBwaW5nX2luZm8ubGFzdE5hbWUpO1xyXG4gICAgICBzZXRWYWx1ZShcImNvdW50cnlcIiwgc2hpcHBpbmdfaW5mby5jb3VudHJ5KTtcclxuICAgICAgc2V0VmFsdWUoXCJhZGRyZXNzXCIsIHNoaXBwaW5nX2luZm8uYWRkcmVzcyk7XHJcbiAgICAgIHNldFZhbHVlKFwiY2l0eVwiLCBzaGlwcGluZ19pbmZvLmNpdHkpO1xyXG4gICAgICBzZXRWYWx1ZShcInN0YXRlXCIsIHNoaXBwaW5nX2luZm8uc3RhdGUpO1xyXG4gICAgICBzZXRWYWx1ZShcInppcENvZGVcIiwgc2hpcHBpbmdfaW5mby56aXBDb2RlKTtcclxuICAgICAgc2V0VmFsdWUoXCJjb250YWN0Tm9cIiwgc2hpcHBpbmdfaW5mby5jb250YWN0Tm8pO1xyXG4gICAgICBzZXRWYWx1ZShcImVtYWlsXCIsIHNoaXBwaW5nX2luZm8uZW1haWwpO1xyXG4gICAgfVxyXG4gIH0sIFtzaGlwcGluZ19pbmZvLCBzZXRWYWx1ZV0pO1xyXG5cclxuICBjb25zdCBzdWJtaXRIYW5kbGVyID0gYXN5bmMgKGRhdGEpID0+IHtcclxuICAgIGlmIChpc1N1Ym1pdHRpbmcpIHJldHVybjtcclxuICAgIHNldElzU3VibWl0dGluZyh0cnVlKTtcclxuICBcclxuICAgIGRpc3BhdGNoKHNldF9zaGlwcGluZyhkYXRhKSk7XHJcbiAgXHJcbiAgICBjb25zdCBwcm9kdWN0cyA9IGNhcnRfcHJvZHVjdHNcclxuICAgICAgLm1hcCgocHJvZHVjdCkgPT4gKHtcclxuICAgICAgICBwcm9kdWN0X2lkOiBwcm9kdWN0LnByb2R1Y3RfaWQsXHJcbiAgICAgICAgcXVhbnRpdHk6IHByb2R1Y3Qub3JkZXJRdWFudGl0eSxcclxuICAgICAgICBwcmljZTogcHJvZHVjdC5wcmljZSxcclxuICAgICAgfSkpXHJcbiAgICAgIC5maWx0ZXIoXHJcbiAgICAgICAgKHByb2R1Y3QpID0+IHByb2R1Y3QucHJvZHVjdF9pZCAmJiBwcm9kdWN0LnF1YW50aXR5ICYmIHByb2R1Y3QucHJpY2VcclxuICAgICAgKTtcclxuICBcclxuICAgIGlmIChwcm9kdWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgbm90aWZ5RXJyb3IoXCJObyB2YWxpZCBwcm9kdWN0cyBpbiBjYXJ0LlwiKTtcclxuICAgICAgc2V0SXNTdWJtaXR0aW5nKGZhbHNlKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICAvLyBDYWxjdWxhdGUgdGhlIGZpbmFsIHRvdGFsIGFmdGVyIGFwcGx5aW5nIHRoZSBkaXNjb3VudFxyXG4gIGNvbnN0IGRpc2NvdW50VG90YWwgPSBkaXNjb3VudEFtb3VudCB8fCAwO1xyXG4gIGNvbnN0IGZpbmFsUHJpY2UgPSBNYXRoLm1heChOdW1iZXIodG90YWwpIC0gZGlzY291bnRUb3RhbCwgMCk7XHJcbiAgXHJcbiAgICBjb25zdCBvcmRlckluZm8gPSB7XHJcbiAgICAgIHByb2R1Y3RzLFxyXG4gICAgICBlbWFpbDogZGF0YS5lbWFpbCxcclxuICAgICAgYWRkcmVzczogZGF0YS5hZGRyZXNzLFxyXG4gICAgICBzdGF0ZTogZGF0YS5zdGF0ZSxcclxuICAgICAgY2l0eTogZGF0YS5jaXR5LFxyXG4gICAgICBwaW5jb2RlOiBkYXRhLnppcENvZGUsXHJcbiAgICAgIGNvdW50cnk6IFwiSW5kaWFcIixcclxuICAgICAgcGhvbmVfbnVtYmVyOiBkYXRhLmNvbnRhY3RObyxcclxuICAgICAgcHJpY2U6IGNhcnRUb3RhbCxcclxuICAgICAgcGF5bWVudF90eXBlOiBkYXRhLnBheW1lbnQsXHJcbiAgICAgIGNvdXBvbl91c2VkOiBjb3Vwb25JbmZvIHx8IG51bGwsXHJcbiAgICAgIGZpcnN0X25hbWU6IGRhdGEuZmlyc3ROYW1lLFxyXG4gICAgICBsYXN0X25hbWU6IGRhdGEubGFzdE5hbWUsXHJcbiAgICAgIGFjY2Vzc1Rva2VuLFxyXG4gICAgfTtcclxuICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChkYXRhLnBheW1lbnQgPT09IFwib25saW5lXCIpIHtcclxuICAgICAgICBhd2FpdCBoYW5kbGVQYXltZW50V2l0aFJhem9ycGF5KG9yZGVySW5mbyk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5wYXltZW50ID09PSBcImNvZFwiKSB7XHJcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgc2F2ZU9yZGVyKG9yZGVySW5mbykudW53cmFwKCk7XHJcbiAgICAgICAgaWYgKHJlcz8ub3JkZXJfaWQpIHtcclxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiY2FydF9wcm9kdWN0c1wiKTtcclxuICAgICAgICAgIHNldE9yZGVySWRGb3JNb2RhbChyZXMub3JkZXJfaWQpO1xyXG4gICAgICAgICAgcmVzZXQoKTtcclxuICAgICAgICAgIHNldFNob3dTdWNjZXNzTW9kYWwodHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG5vdGlmeUVycm9yKFwiRXJyb3Igc2F2aW5nIG9yZGVyLiBQbGVhc2UgdHJ5IGFnYWluLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgb3JkZXIgc3VibWlzc2lvbjpcIiwgZXJyb3IpO1xyXG4gICAgICBub3RpZnlFcnJvcihcIlRoZXJlIHdhcyBhbiBlcnJvciBwbGFjaW5nIHlvdXIgb3JkZXIuIFBsZWFzZSB0cnkgYWdhaW4uXCIpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNTdWJtaXR0aW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVQYXltZW50V2l0aFJhem9ycGF5ID0gYXN5bmMgKG9yZGVySW5mbykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coXCJJbml0aWF0aW5nIFJhem9ycGF5IG9yZGVyIHdpdGggaW5mbzpcIiwgb3JkZXJJbmZvKTtcclxuICAgICAgY29uc3Qgb3JkZXJSZXNwb25zZSA9IGF3YWl0IGNyZWF0ZVJhem9ycGF5T3JkZXIob3JkZXJJbmZvKS51bndyYXAoKTtcclxuICAgICAgY29uc29sZS5sb2coXCJSZWNlaXZlZCBvcmRlciByZXNwb25zZTpcIiwgb3JkZXJSZXNwb25zZSk7XHJcblxyXG4gICAgICBpZiAoIW9yZGVyUmVzcG9uc2UgfHwgb3JkZXJSZXNwb25zZS5zdGF0dXMgIT09IFwic3VjY2Vzc1wiKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkludmFsaWQgb3JkZXIgcmVzcG9uc2U6XCIsIG9yZGVyUmVzcG9uc2UpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBpbml0aWF0ZSBwYXltZW50OiBJbnZhbGlkIHNlcnZlciByZXNwb25zZVwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICBrZXk6IFwicnpwX2xpdmVfMnNUQkx2cHhlZjVxeFBcIixcclxuICAgICAgICBhbW91bnQ6IG9yZGVyUmVzcG9uc2UuYW1vdW50LFxyXG4gICAgICAgIGN1cnJlbmN5OiBcIklOUlwiLFxyXG4gICAgICAgIG5hbWU6IFwiTXlTd2VldFdpc2hlc1wiLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIk9yZGVyIFBheW1lbnRcIixcclxuICAgICAgICBvcmRlcl9pZDogb3JkZXJSZXNwb25zZS5yYXpvcnBheV9vcmRlcl9pZCxcclxuICAgICAgICBoYW5kbGVyOiBhc3luYyAocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgIGF3YWl0IHZlcmlmeUFuZFNhdmVPcmRlcihyZXNwb25zZSwgb3JkZXJJbmZvKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByZWZpbGw6IHtcclxuICAgICAgICAgIG5hbWU6IGAke29yZGVySW5mby5maXJzdF9uYW1lfSAke29yZGVySW5mby5sYXN0X25hbWV9YCxcclxuICAgICAgICAgIGVtYWlsOiBvcmRlckluZm8uZW1haWwsXHJcbiAgICAgICAgICBjb250YWN0OiBvcmRlckluZm8ucGhvbmVfbnVtYmVyLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm90ZXM6IHtcclxuICAgICAgICAgIGFkZHJlc3M6IG9yZGVySW5mby5hZGRyZXNzLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGhlbWU6IHtcclxuICAgICAgICAgIGNvbG9yOiBcIiNGMzcyNTRcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcmF6b3JwYXkgPSBuZXcgd2luZG93LlJhem9ycGF5KG9wdGlvbnMpO1xyXG4gICAgICByYXpvcnBheS5vcGVuKCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gaGFuZGxlUGF5bWVudFdpdGhSYXpvcnBheTpcIiwgZXJyb3IpO1xyXG4gICAgICBub3RpZnlFcnJvcihgRmFpbGVkIHRvIGluaXRpYXRlIHBheW1lbnQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdmVyaWZ5QW5kU2F2ZU9yZGVyID0gYXN5bmMgKHJlc3BvbnNlLCBvcmRlckluZm8pID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHZlcmlmeVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICAgXCJodHRwczovL2FwaXYyLm15c3dlZXR3aXNoZXMuY29tL2FwaS92ZXJpZnlwYXltZW50XCIsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtvcmRlckluZm8uYWNjZXNzVG9rZW59YCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIHJhem9ycGF5X29yZGVyX2lkOiByZXNwb25zZS5yYXpvcnBheV9vcmRlcl9pZCxcclxuICAgICAgICAgICAgcmF6b3JwYXlfcGF5bWVudF9pZDogcmVzcG9uc2UucmF6b3JwYXlfcGF5bWVudF9pZCxcclxuICAgICAgICAgICAgcmF6b3JwYXlfc2lnbmF0dXJlOiByZXNwb25zZS5yYXpvcnBheV9zaWduYXR1cmUsXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCB2ZXJpZnlEYXRhID0gYXdhaXQgdmVyaWZ5UmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgaWYgKHZlcmlmeURhdGEuc3RhdHVzID09PSBcInN1Y2Nlc3NcIikge1xyXG4gICAgICAgIG5vdGlmeVN1Y2Nlc3MoXCJZb3VyIHBheW1lbnQgaGFzIGJlZW4gdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImNhcnRfcHJvZHVjdHNcIik7XHJcbiAgICAgICAgcm91dGVyLnB1c2goYC9vcmRlci8ke3ZlcmlmeURhdGEub3JkZXJfaWR9YCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbm90aWZ5RXJyb3IoXCJQYXltZW50IHZlcmlmaWNhdGlvbiBmYWlsZWQuIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuXCIpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiUGF5bWVudCB2ZXJpZmljYXRpb24gZXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgbm90aWZ5RXJyb3IoXCJQYXltZW50IHZlcmlmaWNhdGlvbiByZXF1ZXN0IGZhaWxlZC4gUGxlYXNlIGNvbnRhY3Qgc3VwcG9ydC5cIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHJlZ2lzdGVyLFxyXG4gICAgaGFuZGxlQ291cG9uQ29kZSxcclxuICAgIGhhbmRsZVN1Ym1pdCxcclxuICAgIHN1Ym1pdEhhbmRsZXIsXHJcbiAgICBmb3JtU3RhdGU6IHsgZXJyb3JzIH0sIC8vIFJldHVybiB0aGUgZW50aXJlIGZvcm1TdGF0ZSBvYmplY3Qgd2l0aCBlcnJvcnNcclxuICAgIGNvdXBvbkFwcGx5TXNnLFxyXG4gICAgY2FydFRvdGFsLFxyXG4gICAgZGlzY291bnRBbW91bnQsXHJcbiAgICBjb3Vwb25SZWYsXHJcbiAgICBzZXRFcnJvcixcclxuICAgIGlzU3VibWl0dGluZyxcclxuICAgIHdhdGNoLFxyXG4gICAgc2V0VmFsdWUsXHJcbiAgICByZXNldCxcclxuICAgIHNob3dTdWNjZXNzTW9kYWwsXHJcbiAgICBzZXRTaG93U3VjY2Vzc01vZGFsLFxyXG4gICAgb3JkZXJJZEZvck1vZGFsLFxyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB1c2VDaGVja291dFN1Ym1pdDsiXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VEaXNwYXRjaCIsInVzZVNlbGVjdG9yIiwidXNlRm9ybSIsInVzZVJvdXRlciIsInVzZUNyZWF0ZVJhem9ycGF5T3JkZXJNdXRhdGlvbiIsInVzZVNhdmVPcmRlck11dGF0aW9uIiwic2V0X3NoaXBwaW5nIiwidXNlTWF0Y2hDb3Vwb25NdXRhdGlvbiIsInVzZUNhcnRJbmZvIiwibm90aWZ5RXJyb3IiLCJub3RpZnlTdWNjZXNzIiwidXNlQ2hlY2tvdXRTdWJtaXQiLCJyb3V0ZXIiLCJkaXNwYXRjaCIsImNvdXBvblJlZiIsInNob3dTdWNjZXNzTW9kYWwiLCJzZXRTaG93U3VjY2Vzc01vZGFsIiwib3JkZXJJZEZvck1vZGFsIiwic2V0T3JkZXJJZEZvck1vZGFsIiwiYWNjZXNzVG9rZW4iLCJ1c2VyIiwic3RhdGUiLCJhdXRoIiwiY2FydF9wcm9kdWN0cyIsImNhcnQiLCJzaGlwcGluZ19pbmZvIiwib3JkZXIiLCJ0b3RhbCIsImNyZWF0ZVJhem9ycGF5T3JkZXIiLCJzYXZlT3JkZXIiLCJtYXRjaENvdXBvbiIsImNvdXBvbkluZm8iLCJzZXRDb3Vwb25JbmZvIiwiY2FydFRvdGFsIiwic2V0Q2FydFRvdGFsIiwiZGlzY291bnRBbW91bnQiLCJzZXREaXNjb3VudEFtb3VudCIsImNvdXBvbkFwcGx5TXNnIiwic2V0Q291cG9uQXBwbHlNc2ciLCJpc1N1Ym1pdHRpbmciLCJzZXRJc1N1Ym1pdHRpbmciLCJyZWdpc3RlciIsImhhbmRsZVN1Ym1pdCIsImZvcm1TdGF0ZSIsImVycm9ycyIsInNldFZhbHVlIiwic2V0RXJyb3IiLCJ3YXRjaCIsInJlc2V0IiwiaGFuZGxlQ291cG9uQ29kZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjdXJyZW50IiwidmFsdWUiLCJjb3Vwb25Db2RlIiwicmVzcG9uc2UiLCJ1bndyYXAiLCJ2YWxpZCIsIm1pbl9wcmljZSIsImRpc2NvdW50IiwicGFyc2VGbG9hdCIsImVycm9yIiwibWVzc2FnZSIsImRpc2NvdW50VG90YWwiLCJ0b3RhbFZhbHVlIiwiTWF0aCIsIm1heCIsIk51bWJlciIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiY291bnRyeSIsImFkZHJlc3MiLCJjaXR5IiwiemlwQ29kZSIsImNvbnRhY3RObyIsImVtYWlsIiwic3VibWl0SGFuZGxlciIsImRhdGEiLCJwcm9kdWN0cyIsIm1hcCIsInByb2R1Y3QiLCJwcm9kdWN0X2lkIiwicXVhbnRpdHkiLCJvcmRlclF1YW50aXR5IiwicHJpY2UiLCJmaWx0ZXIiLCJsZW5ndGgiLCJmaW5hbFByaWNlIiwib3JkZXJJbmZvIiwicGluY29kZSIsInBob25lX251bWJlciIsInBheW1lbnRfdHlwZSIsInBheW1lbnQiLCJjb3Vwb25fdXNlZCIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJoYW5kbGVQYXltZW50V2l0aFJhem9ycGF5IiwicmVzIiwib3JkZXJfaWQiLCJsb2NhbFN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwiY29uc29sZSIsImxvZyIsIm9yZGVyUmVzcG9uc2UiLCJzdGF0dXMiLCJFcnJvciIsIm9wdGlvbnMiLCJrZXkiLCJhbW91bnQiLCJjdXJyZW5jeSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInJhem9ycGF5X29yZGVyX2lkIiwiaGFuZGxlciIsInZlcmlmeUFuZFNhdmVPcmRlciIsInByZWZpbGwiLCJjb250YWN0Iiwibm90ZXMiLCJ0aGVtZSIsImNvbG9yIiwicmF6b3JwYXkiLCJ3aW5kb3ciLCJSYXpvcnBheSIsIm9wZW4iLCJ2ZXJpZnlSZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJhem9ycGF5X3BheW1lbnRfaWQiLCJyYXpvcnBheV9zaWduYXR1cmUiLCJ2ZXJpZnlEYXRhIiwianNvbiIsInB1c2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/hooks/use-checkout-submit.js\n"));

/***/ })

});