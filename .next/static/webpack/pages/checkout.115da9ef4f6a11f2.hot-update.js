"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/checkout",{

/***/ "./src/hooks/use-checkout-submit.js":
/*!******************************************!*\
  !*** ./src/hooks/use-checkout-submit.js ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n/* harmony import */ var react_hook_form__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-hook-form */ \"./node_modules/react-hook-form/dist/index.esm.mjs\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _redux_features_order_orderApi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/redux/features/order/orderApi */ \"./src/redux/features/order/orderApi.js\");\n/* harmony import */ var _redux_features_order_orderSlice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/redux/features/order/orderSlice */ \"./src/redux/features/order/orderSlice.js\");\n/* harmony import */ var _redux_features_coupon_couponApi__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/redux/features/coupon/couponApi */ \"./src/redux/features/coupon/couponApi.js\");\n/* harmony import */ var _use_cart_info__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./use-cart-info */ \"./src/hooks/use-cart-info.js\");\n/* harmony import */ var _utils_toast__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/utils/toast */ \"./src/utils/toast.js\");\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\nconst useCheckoutSubmit = ()=>{\n    _s();\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const dispatch = (0,react_redux__WEBPACK_IMPORTED_MODULE_1__.useDispatch)();\n    const couponRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const [showSuccessModal, setShowSuccessModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [orderIdForModal, setOrderIdForModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const { accessToken, user } = (0,react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector)((state)=>state.auth);\n    const { cart_products } = (0,react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector)((state)=>state.cart);\n    const { shipping_info } = (0,react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector)((state)=>state.order);\n    const { total } = (0,_use_cart_info__WEBPACK_IMPORTED_MODULE_6__[\"default\"])();\n    const [createRazorpayOrder] = (0,_redux_features_order_orderApi__WEBPACK_IMPORTED_MODULE_3__.useCreateRazorpayOrderMutation)();\n    const [saveOrder] = (0,_redux_features_order_orderApi__WEBPACK_IMPORTED_MODULE_3__.useSaveOrderMutation)();\n    const [matchCoupon] = (0,_redux_features_coupon_couponApi__WEBPACK_IMPORTED_MODULE_5__.useMatchCouponMutation)();\n    const [couponInfo, setCouponInfo] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n    const [cartTotal, setCartTotal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(total);\n    const [discountAmount, setDiscountAmount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [couponApplyMsg, setCouponApplyMsg] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [isSubmitting, setIsSubmitting] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const { register, handleSubmit, formState: { errors }, setValue, setError, watch, reset } = (0,react_hook_form__WEBPACK_IMPORTED_MODULE_8__.useForm)();\n    const handleCouponCode = async (event)=>{\n        event.preventDefault();\n        if (!couponRef.current || !couponRef.current.value) {\n            setCouponApplyMsg(\"Please enter a coupon code.\");\n            return;\n        }\n        const couponCode = couponRef.current.value;\n        setCouponInfo(couponCode);\n        try {\n            const response = await matchCoupon({\n                couponCode\n            }).unwrap();\n            if (response.valid) {\n                if (total >= response.min_price) {\n                    setCouponApplyMsg(\"Coupon applied successfully! Discount: ₹\".concat(response.discount));\n                    setDiscountAmount(parseFloat(response.discount));\n                } else {\n                    setCouponApplyMsg(\"Coupon is valid but requires a minimum total of ₹\".concat(response.min_price, \".\"));\n                }\n            } else {\n                setCouponApplyMsg(\"Coupon is not valid.\");\n            }\n        } catch (error) {\n            setCouponApplyMsg(\"Failed to apply coupon: \".concat(error.message));\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const discountTotal = discountAmount || 0;\n        const totalValue = Math.max(Number(total) - discountTotal, 0);\n        setCartTotal(totalValue);\n    }, [\n        total,\n        discountAmount\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (shipping_info) {\n            setValue(\"firstName\", shipping_info.firstName);\n            setValue(\"lastName\", shipping_info.lastName);\n            setValue(\"country\", shipping_info.country);\n            setValue(\"address\", shipping_info.address);\n            setValue(\"city\", shipping_info.city);\n            setValue(\"state\", shipping_info.state);\n            setValue(\"zipCode\", shipping_info.zipCode);\n            setValue(\"contactNo\", shipping_info.contactNo);\n            setValue(\"email\", shipping_info.email);\n        }\n    }, [\n        shipping_info,\n        setValue\n    ]);\n    const submitHandler = async (data)=>{\n        if (isSubmitting) return;\n        setIsSubmitting(true);\n        dispatch((0,_redux_features_order_orderSlice__WEBPACK_IMPORTED_MODULE_4__.set_shipping)(data));\n        const products = cart_products.map((product)=>({\n                product_id: product.product_id,\n                quantity: product.orderQuantity,\n                price: product.price\n            })).filter((product)=>product.product_id && product.quantity && product.price);\n        if (products.length === 0) {\n            (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"No valid products in cart.\");\n            setIsSubmitting(false);\n            return;\n        }\n        const orderInfo = {\n            products,\n            email: data.email,\n            address: data.address,\n            state: data.state,\n            city: data.city,\n            pincode: data.zipCode,\n            country: \"India\",\n            phone_number: data.contactNo,\n            price: cartTotal,\n            payment_type: data.payment,\n            coupon_used: couponInfo || null,\n            first_name: data.firstName,\n            last_name: data.lastName,\n            accessToken\n        };\n        try {\n            if (data.payment === \"online\") {\n                await handlePaymentWithRazorpay(orderInfo);\n            } else if (data.payment === \"cod\") {\n                const res = await saveOrder(orderInfo).unwrap();\n                if (res === null || res === void 0 ? void 0 : res.order_id) {\n                    localStorage.removeItem(\"cart_products\");\n                    setOrderIdForModal(res.order_id);\n                    reset();\n                    setShowSuccessModal(true);\n                } else {\n                    (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"Error saving order. Please try again.\");\n                }\n            }\n        } catch (error) {\n            console.error(\"Error during order submission:\", error);\n            (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"There was an error placing your order. Please try again.\");\n        } finally{\n            setIsSubmitting(false);\n        }\n    };\n    const handlePaymentWithRazorpay = async (orderInfo)=>{\n        try {\n            console.log(\"Initiating Razorpay order with info:\", orderInfo);\n            const orderResponse = await createRazorpayOrder(orderInfo).unwrap();\n            console.log(\"Received order response:\", orderResponse);\n            if (!orderResponse || orderResponse.status !== \"success\") {\n                console.error(\"Invalid order response:\", orderResponse);\n                throw new Error(\"Failed to initiate payment: Invalid server response\");\n            }\n            const options = {\n                key: \"rzp_live_2sTBLvpxef5qxP\",\n                amount: orderResponse.amount,\n                currency: \"INR\",\n                name: \"MySweetWishes\",\n                description: \"Order Payment\",\n                order_id: orderResponse.razorpay_order_id,\n                handler: async (response)=>{\n                    await verifyAndSaveOrder(response, orderInfo);\n                },\n                prefill: {\n                    name: \"\".concat(orderInfo.first_name, \" \").concat(orderInfo.last_name),\n                    email: orderInfo.email,\n                    contact: orderInfo.phone_number\n                },\n                notes: {\n                    address: orderInfo.address\n                },\n                theme: {\n                    color: \"#F37254\"\n                }\n            };\n            const razorpay = new window.Razorpay(options);\n            razorpay.open();\n        } catch (error) {\n            console.error(\"Error in handlePaymentWithRazorpay:\", error);\n            (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"Failed to initiate payment: \".concat(error.message));\n            throw error;\n        }\n    };\n    const verifyAndSaveOrder = async (response, orderInfo)=>{\n        try {\n            const verifyResponse = await fetch(\"https://apiv2.mysweetwishes.com/api/verifypayment\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: \"Bearer \".concat(orderInfo.accessToken)\n                },\n                body: JSON.stringify({\n                    razorpay_order_id: response.razorpay_order_id,\n                    razorpay_payment_id: response.razorpay_payment_id,\n                    razorpay_signature: response.razorpay_signature\n                })\n            });\n            const verifyData = await verifyResponse.json();\n            if (verifyData.status === \"success\") {\n                (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifySuccess)(\"Your payment has been verified successfully!\");\n                localStorage.removeItem(\"cart_products\");\n                router.push(\"/order/\".concat(verifyData.order_id));\n            } else {\n                (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"Payment verification failed. Please contact support.\");\n            }\n        } catch (error) {\n            console.error(\"Payment verification error:\", error);\n            (0,_utils_toast__WEBPACK_IMPORTED_MODULE_7__.notifyError)(\"Payment verification request failed. Please contact support.\");\n        }\n    };\n    return {\n        register,\n        handleCouponCode,\n        handleSubmit,\n        submitHandler,\n        formState: {\n            errors\n        },\n        couponApplyMsg,\n        cartTotal,\n        discountAmount,\n        couponRef,\n        setError,\n        isSubmitting,\n        watch,\n        setValue,\n        reset,\n        showSuccessModal,\n        setShowSuccessModal,\n        orderIdForModal\n    };\n};\n_s(useCheckoutSubmit, \"9ePoGOkfs6ifMb9WjpSWxBjE09s=\", false, function() {\n    return [\n        next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter,\n        react_redux__WEBPACK_IMPORTED_MODULE_1__.useDispatch,\n        react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_1__.useSelector,\n        _use_cart_info__WEBPACK_IMPORTED_MODULE_6__[\"default\"],\n        _redux_features_order_orderApi__WEBPACK_IMPORTED_MODULE_3__.useCreateRazorpayOrderMutation,\n        _redux_features_order_orderApi__WEBPACK_IMPORTED_MODULE_3__.useSaveOrderMutation,\n        _redux_features_coupon_couponApi__WEBPACK_IMPORTED_MODULE_5__.useMatchCouponMutation,\n        react_hook_form__WEBPACK_IMPORTED_MODULE_8__.useForm\n    ];\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (useCheckoutSubmit);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLENBQUMsVUFBOEIsT0FBcEJGLFdBQVdwQyxRQUFRO1lBQzNDLE9BQU87Z0JBQ0x4Rix5REFBV0EsQ0FBQztZQUNkO1FBQ0YsRUFBRSxPQUFPb0QsT0FBTztZQUNkdUMsUUFBUXZDLEtBQUssQ0FBQywrQkFBK0JBO1lBQzdDcEQseURBQVdBLENBQUM7UUFDZDtJQUNGO0lBRUEsT0FBTztRQUNMZ0M7UUFDQVE7UUFDQVA7UUFDQWtDO1FBQ0FqQyxXQUFXO1lBQUVDO1FBQU87UUFDcEJQO1FBQ0FKO1FBQ0FFO1FBQ0FyQjtRQUNBZ0M7UUFDQVA7UUFDQVE7UUFDQUY7UUFDQUc7UUFDQWpDO1FBQ0FDO1FBQ0FDO0lBQ0Y7QUFDRjtHQWxQTU47O1FBQ1dSLGtEQUFTQTtRQUNQSCxvREFBV0E7UUFNRUMsb0RBQVdBO1FBQ2ZBLG9EQUFXQTtRQUNYQSxvREFBV0E7UUFDbkJPLHNEQUFXQTtRQUVDSiwwRkFBOEJBO1FBQ3hDQyxnRkFBb0JBO1FBQ2xCRSxvRkFBc0JBO1FBZ0J4Q0wsb0RBQU9BOzs7QUFxTmIsK0RBQWVTLGlCQUFpQkEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvaG9va3MvdXNlLWNoZWNrb3V0LXN1Ym1pdC5qcz9lMGIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyB1c2VEaXNwYXRjaCwgdXNlU2VsZWN0b3IgfSBmcm9tIFwicmVhY3QtcmVkdXhcIjtcclxuaW1wb3J0IHsgdXNlRm9ybSB9IGZyb20gXCJyZWFjdC1ob29rLWZvcm1cIjtcclxuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XHJcbmltcG9ydCB7XHJcbiAgdXNlQ3JlYXRlUmF6b3JwYXlPcmRlck11dGF0aW9uLFxyXG4gIHVzZVNhdmVPcmRlck11dGF0aW9uLFxyXG59IGZyb20gXCJAL3JlZHV4L2ZlYXR1cmVzL29yZGVyL29yZGVyQXBpXCI7XHJcbmltcG9ydCB7IHNldF9zaGlwcGluZyB9IGZyb20gXCJAL3JlZHV4L2ZlYXR1cmVzL29yZGVyL29yZGVyU2xpY2VcIjtcclxuaW1wb3J0IHsgdXNlTWF0Y2hDb3Vwb25NdXRhdGlvbiB9IGZyb20gXCJAL3JlZHV4L2ZlYXR1cmVzL2NvdXBvbi9jb3Vwb25BcGlcIjtcclxuaW1wb3J0IHVzZUNhcnRJbmZvIGZyb20gXCIuL3VzZS1jYXJ0LWluZm9cIjtcclxuaW1wb3J0IHsgbm90aWZ5RXJyb3IsIG5vdGlmeVN1Y2Nlc3MgfSBmcm9tIFwiQC91dGlscy90b2FzdFwiO1xyXG5cclxuY29uc3QgdXNlQ2hlY2tvdXRTdWJtaXQgPSAoKSA9PiB7XHJcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xyXG4gIGNvbnN0IGNvdXBvblJlZiA9IHVzZVJlZihudWxsKTtcclxuXHJcbiAgY29uc3QgW3Nob3dTdWNjZXNzTW9kYWwsIHNldFNob3dTdWNjZXNzTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtvcmRlcklkRm9yTW9kYWwsIHNldE9yZGVySWRGb3JNb2RhbF0gPSB1c2VTdGF0ZShudWxsKTtcclxuXHJcbiAgY29uc3QgeyBhY2Nlc3NUb2tlbiwgdXNlciB9ID0gdXNlU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS5hdXRoKTtcclxuICBjb25zdCB7IGNhcnRfcHJvZHVjdHMgfSA9IHVzZVNlbGVjdG9yKChzdGF0ZSkgPT4gc3RhdGUuY2FydCk7XHJcbiAgY29uc3QgeyBzaGlwcGluZ19pbmZvIH0gPSB1c2VTZWxlY3Rvcigoc3RhdGUpID0+IHN0YXRlLm9yZGVyKTtcclxuICBjb25zdCB7IHRvdGFsIH0gPSB1c2VDYXJ0SW5mbygpO1xyXG5cclxuICBjb25zdCBbY3JlYXRlUmF6b3JwYXlPcmRlcl0gPSB1c2VDcmVhdGVSYXpvcnBheU9yZGVyTXV0YXRpb24oKTtcclxuICBjb25zdCBbc2F2ZU9yZGVyXSA9IHVzZVNhdmVPcmRlck11dGF0aW9uKCk7XHJcbiAgY29uc3QgW21hdGNoQ291cG9uXSA9IHVzZU1hdGNoQ291cG9uTXV0YXRpb24oKTtcclxuXHJcbiAgY29uc3QgW2NvdXBvbkluZm8sIHNldENvdXBvbkluZm9dID0gdXNlU3RhdGUoKTtcclxuICBjb25zdCBbY2FydFRvdGFsLCBzZXRDYXJ0VG90YWxdID0gdXNlU3RhdGUodG90YWwpO1xyXG4gIGNvbnN0IFtkaXNjb3VudEFtb3VudCwgc2V0RGlzY291bnRBbW91bnRdID0gdXNlU3RhdGUoMCk7XHJcbiAgY29uc3QgW2NvdXBvbkFwcGx5TXNnLCBzZXRDb3Vwb25BcHBseU1zZ10gPSB1c2VTdGF0ZShcIlwiKTtcclxuICBjb25zdCBbaXNTdWJtaXR0aW5nLCBzZXRJc1N1Ym1pdHRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICBjb25zdCB7XHJcbiAgICByZWdpc3RlcixcclxuICAgIGhhbmRsZVN1Ym1pdCxcclxuICAgIGZvcm1TdGF0ZTogeyBlcnJvcnMgfSxcclxuICAgIHNldFZhbHVlLFxyXG4gICAgc2V0RXJyb3IsXHJcbiAgICB3YXRjaCxcclxuICAgIHJlc2V0XHJcbiAgfSA9IHVzZUZvcm0oKTtcclxuXHJcblxyXG4gIGNvbnN0IGhhbmRsZUNvdXBvbkNvZGUgPSBhc3luYyAoZXZlbnQpID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKCFjb3Vwb25SZWYuY3VycmVudCB8fCAhY291cG9uUmVmLmN1cnJlbnQudmFsdWUpIHtcclxuICAgICAgc2V0Q291cG9uQXBwbHlNc2coXCJQbGVhc2UgZW50ZXIgYSBjb3Vwb24gY29kZS5cIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb3Vwb25Db2RlID0gY291cG9uUmVmLmN1cnJlbnQudmFsdWU7XHJcbiAgICBzZXRDb3Vwb25JbmZvKGNvdXBvbkNvZGUpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYXRjaENvdXBvbih7IGNvdXBvbkNvZGUgfSkudW53cmFwKCk7XHJcblxyXG4gICAgICBpZiAocmVzcG9uc2UudmFsaWQpIHtcclxuICAgICAgICBpZiAodG90YWwgPj0gcmVzcG9uc2UubWluX3ByaWNlKSB7XHJcbiAgICAgICAgICBzZXRDb3Vwb25BcHBseU1zZyhcclxuICAgICAgICAgICAgYENvdXBvbiBhcHBsaWVkIHN1Y2Nlc3NmdWxseSEgRGlzY291bnQ6IOKCuSR7cmVzcG9uc2UuZGlzY291bnR9YFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIHNldERpc2NvdW50QW1vdW50KHBhcnNlRmxvYXQocmVzcG9uc2UuZGlzY291bnQpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2V0Q291cG9uQXBwbHlNc2coXHJcbiAgICAgICAgICAgIGBDb3Vwb24gaXMgdmFsaWQgYnV0IHJlcXVpcmVzIGEgbWluaW11bSB0b3RhbCBvZiDigrkke3Jlc3BvbnNlLm1pbl9wcmljZX0uYFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0Q291cG9uQXBwbHlNc2coXCJDb3Vwb24gaXMgbm90IHZhbGlkLlwiKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgc2V0Q291cG9uQXBwbHlNc2coYEZhaWxlZCB0byBhcHBseSBjb3Vwb246ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgZGlzY291bnRUb3RhbCA9IGRpc2NvdW50QW1vdW50IHx8IDA7XHJcbiAgICBjb25zdCB0b3RhbFZhbHVlID0gTWF0aC5tYXgoTnVtYmVyKHRvdGFsKSAtIGRpc2NvdW50VG90YWwsIDApO1xyXG4gICAgc2V0Q2FydFRvdGFsKHRvdGFsVmFsdWUpO1xyXG4gIH0sIFt0b3RhbCwgZGlzY291bnRBbW91bnRdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChzaGlwcGluZ19pbmZvKSB7XHJcbiAgICAgIHNldFZhbHVlKFwiZmlyc3ROYW1lXCIsIHNoaXBwaW5nX2luZm8uZmlyc3ROYW1lKTtcclxuICAgICAgc2V0VmFsdWUoXCJsYXN0TmFtZVwiLCBzaGlwcGluZ19pbmZvLmxhc3ROYW1lKTtcclxuICAgICAgc2V0VmFsdWUoXCJjb3VudHJ5XCIsIHNoaXBwaW5nX2luZm8uY291bnRyeSk7XHJcbiAgICAgIHNldFZhbHVlKFwiYWRkcmVzc1wiLCBzaGlwcGluZ19pbmZvLmFkZHJlc3MpO1xyXG4gICAgICBzZXRWYWx1ZShcImNpdHlcIiwgc2hpcHBpbmdfaW5mby5jaXR5KTtcclxuICAgICAgc2V0VmFsdWUoXCJzdGF0ZVwiLCBzaGlwcGluZ19pbmZvLnN0YXRlKTtcclxuICAgICAgc2V0VmFsdWUoXCJ6aXBDb2RlXCIsIHNoaXBwaW5nX2luZm8uemlwQ29kZSk7XHJcbiAgICAgIHNldFZhbHVlKFwiY29udGFjdE5vXCIsIHNoaXBwaW5nX2luZm8uY29udGFjdE5vKTtcclxuICAgICAgc2V0VmFsdWUoXCJlbWFpbFwiLCBzaGlwcGluZ19pbmZvLmVtYWlsKTtcclxuICAgIH1cclxuICB9LCBbc2hpcHBpbmdfaW5mbywgc2V0VmFsdWVdKTtcclxuXHJcbiAgY29uc3Qgc3VibWl0SGFuZGxlciA9IGFzeW5jIChkYXRhKSA9PiB7XHJcbiAgICBpZiAoaXNTdWJtaXR0aW5nKSByZXR1cm47XHJcbiAgICBzZXRJc1N1Ym1pdHRpbmcodHJ1ZSk7XHJcbiAgXHJcbiAgICBkaXNwYXRjaChzZXRfc2hpcHBpbmcoZGF0YSkpO1xyXG4gIFxyXG4gICAgY29uc3QgcHJvZHVjdHMgPSBjYXJ0X3Byb2R1Y3RzXHJcbiAgICAgIC5tYXAoKHByb2R1Y3QpID0+ICh7XHJcbiAgICAgICAgcHJvZHVjdF9pZDogcHJvZHVjdC5wcm9kdWN0X2lkLFxyXG4gICAgICAgIHF1YW50aXR5OiBwcm9kdWN0Lm9yZGVyUXVhbnRpdHksXHJcbiAgICAgICAgcHJpY2U6IHByb2R1Y3QucHJpY2UsXHJcbiAgICAgIH0pKVxyXG4gICAgICAuZmlsdGVyKFxyXG4gICAgICAgIChwcm9kdWN0KSA9PiBwcm9kdWN0LnByb2R1Y3RfaWQgJiYgcHJvZHVjdC5xdWFudGl0eSAmJiBwcm9kdWN0LnByaWNlXHJcbiAgICAgICk7XHJcbiAgXHJcbiAgICBpZiAocHJvZHVjdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIG5vdGlmeUVycm9yKFwiTm8gdmFsaWQgcHJvZHVjdHMgaW4gY2FydC5cIik7XHJcbiAgICAgIHNldElzU3VibWl0dGluZyhmYWxzZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICBcclxuICAgIGNvbnN0IG9yZGVySW5mbyA9IHtcclxuICAgICAgcHJvZHVjdHMsXHJcbiAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxyXG4gICAgICBhZGRyZXNzOiBkYXRhLmFkZHJlc3MsXHJcbiAgICAgIHN0YXRlOiBkYXRhLnN0YXRlLFxyXG4gICAgICBjaXR5OiBkYXRhLmNpdHksXHJcbiAgICAgIHBpbmNvZGU6IGRhdGEuemlwQ29kZSxcclxuICAgICAgY291bnRyeTogXCJJbmRpYVwiLFxyXG4gICAgICBwaG9uZV9udW1iZXI6IGRhdGEuY29udGFjdE5vLFxyXG4gICAgICBwcmljZTogY2FydFRvdGFsLFxyXG4gICAgICBwYXltZW50X3R5cGU6IGRhdGEucGF5bWVudCxcclxuICAgICAgY291cG9uX3VzZWQ6IGNvdXBvbkluZm8gfHwgbnVsbCxcclxuICAgICAgZmlyc3RfbmFtZTogZGF0YS5maXJzdE5hbWUsXHJcbiAgICAgIGxhc3RfbmFtZTogZGF0YS5sYXN0TmFtZSxcclxuICAgICAgYWNjZXNzVG9rZW4sXHJcbiAgICB9O1xyXG4gIFxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKGRhdGEucGF5bWVudCA9PT0gXCJvbmxpbmVcIikge1xyXG4gICAgICAgIGF3YWl0IGhhbmRsZVBheW1lbnRXaXRoUmF6b3JwYXkob3JkZXJJbmZvKTtcclxuICAgICAgfSBlbHNlIGlmIChkYXRhLnBheW1lbnQgPT09IFwiY29kXCIpIHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzYXZlT3JkZXIob3JkZXJJbmZvKS51bndyYXAoKTtcclxuICAgICAgICBpZiAocmVzPy5vcmRlcl9pZCkge1xyXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjYXJ0X3Byb2R1Y3RzXCIpO1xyXG4gICAgICAgICAgc2V0T3JkZXJJZEZvck1vZGFsKHJlcy5vcmRlcl9pZCk7XHJcbiAgICAgICAgICByZXNldCgpO1xyXG4gICAgICAgICAgc2V0U2hvd1N1Y2Nlc3NNb2RhbCh0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbm90aWZ5RXJyb3IoXCJFcnJvciBzYXZpbmcgb3JkZXIuIFBsZWFzZSB0cnkgYWdhaW4uXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGR1cmluZyBvcmRlciBzdWJtaXNzaW9uOlwiLCBlcnJvcik7XHJcbiAgICAgIG5vdGlmeUVycm9yKFwiVGhlcmUgd2FzIGFuIGVycm9yIHBsYWNpbmcgeW91ciBvcmRlci4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc1N1Ym1pdHRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVBheW1lbnRXaXRoUmF6b3JwYXkgPSBhc3luYyAob3JkZXJJbmZvKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkluaXRpYXRpbmcgUmF6b3JwYXkgb3JkZXIgd2l0aCBpbmZvOlwiLCBvcmRlckluZm8pO1xyXG4gICAgICBjb25zdCBvcmRlclJlc3BvbnNlID0gYXdhaXQgY3JlYXRlUmF6b3JwYXlPcmRlcihvcmRlckluZm8pLnVud3JhcCgpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlJlY2VpdmVkIG9yZGVyIHJlc3BvbnNlOlwiLCBvcmRlclJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGlmICghb3JkZXJSZXNwb25zZSB8fCBvcmRlclJlc3BvbnNlLnN0YXR1cyAhPT0gXCJzdWNjZXNzXCIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCBvcmRlciByZXNwb25zZTpcIiwgb3JkZXJSZXNwb25zZSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGluaXRpYXRlIHBheW1lbnQ6IEludmFsaWQgc2VydmVyIHJlc3BvbnNlXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgIGtleTogXCJyenBfbGl2ZV8yc1RCTHZweGVmNXF4UFwiLFxyXG4gICAgICAgIGFtb3VudDogb3JkZXJSZXNwb25zZS5hbW91bnQsXHJcbiAgICAgICAgY3VycmVuY3k6IFwiSU5SXCIsXHJcbiAgICAgICAgbmFtZTogXCJNeVN3ZWV0V2lzaGVzXCIsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IFwiT3JkZXIgUGF5bWVudFwiLFxyXG4gICAgICAgIG9yZGVyX2lkOiBvcmRlclJlc3BvbnNlLnJhem9ycGF5X29yZGVyX2lkLFxyXG4gICAgICAgIGhhbmRsZXI6IGFzeW5jIChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgYXdhaXQgdmVyaWZ5QW5kU2F2ZU9yZGVyKHJlc3BvbnNlLCBvcmRlckluZm8pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJlZmlsbDoge1xyXG4gICAgICAgICAgbmFtZTogYCR7b3JkZXJJbmZvLmZpcnN0X25hbWV9ICR7b3JkZXJJbmZvLmxhc3RfbmFtZX1gLFxyXG4gICAgICAgICAgZW1haWw6IG9yZGVySW5mby5lbWFpbCxcclxuICAgICAgICAgIGNvbnRhY3Q6IG9yZGVySW5mby5waG9uZV9udW1iZXIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub3Rlczoge1xyXG4gICAgICAgICAgYWRkcmVzczogb3JkZXJJbmZvLmFkZHJlc3MsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0aGVtZToge1xyXG4gICAgICAgICAgY29sb3I6IFwiI0YzNzI1NFwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByYXpvcnBheSA9IG5ldyB3aW5kb3cuUmF6b3JwYXkob3B0aW9ucyk7XHJcbiAgICAgIHJhem9ycGF5Lm9wZW4oKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBoYW5kbGVQYXltZW50V2l0aFJhem9ycGF5OlwiLCBlcnJvcik7XHJcbiAgICAgIG5vdGlmeUVycm9yKGBGYWlsZWQgdG8gaW5pdGlhdGUgcGF5bWVudDogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCB2ZXJpZnlBbmRTYXZlT3JkZXIgPSBhc3luYyAocmVzcG9uc2UsIG9yZGVySW5mbykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdmVyaWZ5UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgICBcImh0dHBzOi8vYXBpdjIubXlzd2VldHdpc2hlcy5jb20vYXBpL3ZlcmlmeXBheW1lbnRcIixcclxuICAgICAgICB7XHJcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke29yZGVySW5mby5hY2Nlc3NUb2tlbn1gLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgcmF6b3JwYXlfb3JkZXJfaWQ6IHJlc3BvbnNlLnJhem9ycGF5X29yZGVyX2lkLFxyXG4gICAgICAgICAgICByYXpvcnBheV9wYXltZW50X2lkOiByZXNwb25zZS5yYXpvcnBheV9wYXltZW50X2lkLFxyXG4gICAgICAgICAgICByYXpvcnBheV9zaWduYXR1cmU6IHJlc3BvbnNlLnJhem9ycGF5X3NpZ25hdHVyZSxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IHZlcmlmeURhdGEgPSBhd2FpdCB2ZXJpZnlSZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICBpZiAodmVyaWZ5RGF0YS5zdGF0dXMgPT09IFwic3VjY2Vzc1wiKSB7XHJcbiAgICAgICAgbm90aWZ5U3VjY2VzcyhcIllvdXIgcGF5bWVudCBoYXMgYmVlbiB2ZXJpZmllZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiY2FydF9wcm9kdWN0c1wiKTtcclxuICAgICAgICByb3V0ZXIucHVzaChgL29yZGVyLyR7dmVyaWZ5RGF0YS5vcmRlcl9pZH1gKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBub3RpZnlFcnJvcihcIlBheW1lbnQgdmVyaWZpY2F0aW9uIGZhaWxlZC4gUGxlYXNlIGNvbnRhY3Qgc3VwcG9ydC5cIik7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJQYXltZW50IHZlcmlmaWNhdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgICBub3RpZnlFcnJvcihcIlBheW1lbnQgdmVyaWZpY2F0aW9uIHJlcXVlc3QgZmFpbGVkLiBQbGVhc2UgY29udGFjdCBzdXBwb3J0LlwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVnaXN0ZXIsXHJcbiAgICBoYW5kbGVDb3Vwb25Db2RlLFxyXG4gICAgaGFuZGxlU3VibWl0LFxyXG4gICAgc3VibWl0SGFuZGxlcixcclxuICAgIGZvcm1TdGF0ZTogeyBlcnJvcnMgfSwgLy8gUmV0dXJuIHRoZSBlbnRpcmUgZm9ybVN0YXRlIG9iamVjdCB3aXRoIGVycm9yc1xyXG4gICAgY291cG9uQXBwbHlNc2csXHJcbiAgICBjYXJ0VG90YWwsXHJcbiAgICBkaXNjb3VudEFtb3VudCxcclxuICAgIGNvdXBvblJlZixcclxuICAgIHNldEVycm9yLFxyXG4gICAgaXNTdWJtaXR0aW5nLFxyXG4gICAgd2F0Y2gsXHJcbiAgICBzZXRWYWx1ZSxcclxuICAgIHJlc2V0LFxyXG4gICAgc2hvd1N1Y2Nlc3NNb2RhbCxcclxuICAgIHNldFNob3dTdWNjZXNzTW9kYWwsXHJcbiAgICBvcmRlcklkRm9yTW9kYWwsXHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZUNoZWNrb3V0U3VibWl0OyJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZUVmZmVjdCIsInVzZURpc3BhdGNoIiwidXNlU2VsZWN0b3IiLCJ1c2VGb3JtIiwidXNlUm91dGVyIiwidXNlQ3JlYXRlUmF6b3JwYXlPcmRlck11dGF0aW9uIiwidXNlU2F2ZU9yZGVyTXV0YXRpb24iLCJzZXRfc2hpcHBpbmciLCJ1c2VNYXRjaENvdXBvbk11dGF0aW9uIiwidXNlQ2FydEluZm8iLCJub3RpZnlFcnJvciIsIm5vdGlmeVN1Y2Nlc3MiLCJ1c2VDaGVja291dFN1Ym1pdCIsInJvdXRlciIsImRpc3BhdGNoIiwiY291cG9uUmVmIiwic2hvd1N1Y2Nlc3NNb2RhbCIsInNldFNob3dTdWNjZXNzTW9kYWwiLCJvcmRlcklkRm9yTW9kYWwiLCJzZXRPcmRlcklkRm9yTW9kYWwiLCJhY2Nlc3NUb2tlbiIsInVzZXIiLCJzdGF0ZSIsImF1dGgiLCJjYXJ0X3Byb2R1Y3RzIiwiY2FydCIsInNoaXBwaW5nX2luZm8iLCJvcmRlciIsInRvdGFsIiwiY3JlYXRlUmF6b3JwYXlPcmRlciIsInNhdmVPcmRlciIsIm1hdGNoQ291cG9uIiwiY291cG9uSW5mbyIsInNldENvdXBvbkluZm8iLCJjYXJ0VG90YWwiLCJzZXRDYXJ0VG90YWwiLCJkaXNjb3VudEFtb3VudCIsInNldERpc2NvdW50QW1vdW50IiwiY291cG9uQXBwbHlNc2ciLCJzZXRDb3Vwb25BcHBseU1zZyIsImlzU3VibWl0dGluZyIsInNldElzU3VibWl0dGluZyIsInJlZ2lzdGVyIiwiaGFuZGxlU3VibWl0IiwiZm9ybVN0YXRlIiwiZXJyb3JzIiwic2V0VmFsdWUiLCJzZXRFcnJvciIsIndhdGNoIiwicmVzZXQiLCJoYW5kbGVDb3Vwb25Db2RlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImN1cnJlbnQiLCJ2YWx1ZSIsImNvdXBvbkNvZGUiLCJyZXNwb25zZSIsInVud3JhcCIsInZhbGlkIiwibWluX3ByaWNlIiwiZGlzY291bnQiLCJwYXJzZUZsb2F0IiwiZXJyb3IiLCJtZXNzYWdlIiwiZGlzY291bnRUb3RhbCIsInRvdGFsVmFsdWUiLCJNYXRoIiwibWF4IiwiTnVtYmVyIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJjb3VudHJ5IiwiYWRkcmVzcyIsImNpdHkiLCJ6aXBDb2RlIiwiY29udGFjdE5vIiwiZW1haWwiLCJzdWJtaXRIYW5kbGVyIiwiZGF0YSIsInByb2R1Y3RzIiwibWFwIiwicHJvZHVjdCIsInByb2R1Y3RfaWQiLCJxdWFudGl0eSIsIm9yZGVyUXVhbnRpdHkiLCJwcmljZSIsImZpbHRlciIsImxlbmd0aCIsIm9yZGVySW5mbyIsInBpbmNvZGUiLCJwaG9uZV9udW1iZXIiLCJwYXltZW50X3R5cGUiLCJwYXltZW50IiwiY291cG9uX3VzZWQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiaGFuZGxlUGF5bWVudFdpdGhSYXpvcnBheSIsInJlcyIsIm9yZGVyX2lkIiwibG9jYWxTdG9yYWdlIiwicmVtb3ZlSXRlbSIsImNvbnNvbGUiLCJsb2ciLCJvcmRlclJlc3BvbnNlIiwic3RhdHVzIiwiRXJyb3IiLCJvcHRpb25zIiwia2V5IiwiYW1vdW50IiwiY3VycmVuY3kiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJyYXpvcnBheV9vcmRlcl9pZCIsImhhbmRsZXIiLCJ2ZXJpZnlBbmRTYXZlT3JkZXIiLCJwcmVmaWxsIiwiY29udGFjdCIsIm5vdGVzIiwidGhlbWUiLCJjb2xvciIsInJhem9ycGF5Iiwid2luZG93IiwiUmF6b3JwYXkiLCJvcGVuIiwidmVyaWZ5UmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyYXpvcnBheV9wYXltZW50X2lkIiwicmF6b3JwYXlfc2lnbmF0dXJlIiwidmVyaWZ5RGF0YSIsImpzb24iLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/hooks/use-checkout-submit.js\n"));

/***/ })

});